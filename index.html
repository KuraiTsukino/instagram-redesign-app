<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Freddie Mercury Instagram</title>
</head>
<body>
    <h1 id="username"></h1>
    <p id="posts"></p>
    <div id="photos"></div>
    
    <script>
        const username = document.getElementById("username")
        const posts = document.getElementById("post")
        const photos = document.getElementById("photos")

        const BASE_API = "https://graph.instagram.com/me"
        const ACCESS_TOKEN = IGQVJYQ2pBMXV0WDAwQWJxS0o5OV9XQ1RVZAV8zZAVNwM1BVVEpEXzU4Q1VSUHdCSkh2RjBZAM2pGVDAwNDBVQi04cjFZAOUd5dHlMX2YxUHEtQkdoaUtjQ1dDaWhPSWJlTjJscjMtT3BtTVJEOGN5bWpETG1pWUlsSEUtUGFV

        async function getUserInfo () {
            const response = await fetch (`${BASE_API}?fields=username, media_count&access_token=${ACCESS_TOKEN}`) 
            const userInfo = await response.json()
            console.log(userInfo)
            username.innerHTML = userInfo.username
            posts.innerHTML = userInfo.media_count
            return userInfo
        }

        getUserInfo()

        async function getUserMediaInfo() {
            const response = await fetch(`${BASE_API}/media?fields=id,media_url&access_token=${ACCESS_TOKEN}`)
            const userMediaInfo = await response.json()
            console.log(userMediaInfo)
            return userMediaInfo
        }

        getUserMediaInfo().then(media => {
            media.data.map((mediaInfo) => {
                const img = document.createElement("img")
                img.style.width = "100px"
                img.src = mediaInfo.media_url
                photos.appendChild(img)
            })
        })
    </script>
</body>
</html>